#include <ESP8266WiFi.h>

#define WLAN_SSID "WiFi LCS."
#define WLAN_PASS "12345678"

#define HOMEON_CENTRAL_HOST "192.168.0.107"
#define HOMEON_CENTRAL_PORT 1500

WiFiClient client;

void setup()
{
  Serial.begin(9600);
  // Connect to WiFi access point.
  Serial.println(); Serial.println();
  Serial.print("Connecting to ");
  Serial.println(WLAN_SSID);
  
  WiFi.begin(WLAN_SSID, WLAN_PASS);
  while (WiFi.status() != WL_CONNECTED) 
  {
    delay(200);
    Serial.print(".");
  }
  Serial.println();
  Serial.println("Connected!");
  Serial.println("ESP8266 Network Config ");
  Serial.println(" IP - " + WiFi.localIP());
  Serial.println();
  Serial.println();
}

void loop() 
{
  Serial.print("Connecting to server");
  
  while (!client.connect(HOMEON_CENTRAL_HOST, HOMEON_CENTRAL_PORT)) 
  {
    delay(500);
    Serial.print(".");
    yield();
  }
  
  Serial.println();
  Serial.print("Conected to IP: ");
  Serial.println(HOMEON_CENTRAL_HOST);

  delay(1000);
  Serial.println("Sending Write test");
  client.flush();
  
  char message[3]; 
  message[0]='5';
  message[1]='7';
  message[2]='8';
  
  client.write((const uint8_t*)message, sizeof(message));
  client.flush();

  while(client.connected())
  {
    if(client.available())
    {
      char response = client.read();
  
      Serial.println(response);
    }
  }

  Serial.println("Fim");
  client.stop();

  delay(5000);
}

